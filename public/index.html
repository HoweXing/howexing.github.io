<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>XZH</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="xingzhihao">
  
  
  <meta name="description" content="编程 互联网 技术 程序员 码农">
<meta property="og:type" content="website">
<meta property="og:title" content="XZH">
<meta property="og:url" content="http://www.xzh.space/index.html">
<meta property="og:site_name" content="XZH">
<meta property="og:description" content="编程 互联网 技术 程序员 码农">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="XZH">
<meta name="twitter:description" content="编程 互联网 技术 程序员 码农">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
  
<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?bcbfe64f39fa66cb8a2c37046dbb7d1d";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">XZH</a></h1>
    <p><a href="/">待出栏码农</a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/archives">归档</a></li>
      
        <li><a href="/tags">标签</a></li>
      
        <li><a href="/about">关于</a></li>
      
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content">




  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/Unix标准IO库/">
  <time datetime="2016-06-18T01:05:00.000Z">
    2016-06-18
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/06/Unix标准IO库/">UNIX标准I/O库</a></h1>
  

  </header>
  
  <div class="entry">
    
      <h2 id="流和FILE对象"><a href="#流和FILE对象" class="headerlink" title="流和FILE对象"></a>流和FILE对象</h2><p>文件I/O中，当打开一个文件时，即返回一个文件描述符，然后该文件描述符就用于后续的I/O操作。而对于标准I/O库，它们的操作是围绕流进行的，当使用标准I/O库打开或创建一个文件时，我们已使一个流与一个文件相关联。</p>
<p>标准I/O文件流可以用于单字节或多字节（宽）字符集。流的定向决定了所读写的字符是单字节还是多字节的。一个流被创建时是没有定向的，若在未定向的流上使用多字节I/O函数，则将该流的定向设置为宽定向的；若在未定向的流上使用单字节I/O函数，则将该流的定向设置为字节定向的。</p>
<p>有两个函数可以改变流的定向。freopen函数清除一个流的定向，fwide函数设置流的定向。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;wchar.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fwide</span><span class="params">(FILE *fp, <span class="keyword">int</span> mode)</span></span>;</span><br></pre></td></tr></table></figure>
    
    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2016/06/Unix标准IO库/#more" class="more-link">阅读全文</a>
        </div>
      
      
    
    <div class="clearfix">
      
    </div>
  </footer>
</article>




  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/Unix文件和目录/">
  <time datetime="2016-06-04T16:00:33.000Z">
    2016-06-05
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/06/Unix文件和目录/">UNIX文件和目录</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>文件属性含义，修改文件属性，UNIX文件系统结构和符号链接，目录操作。</p>
<h2 id="函数stat、fstat、fstatat和lstat"><a href="#函数stat、fstat、fstatat和lstat" class="headerlink" title="函数stat、fstat、fstatat和lstat"></a>函数stat、fstat、fstatat和lstat</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">stat</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> pathname, <span class="keyword">struct</span> stat *<span class="keyword">restrict</span> buf)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fstat</span><span class="params">(<span class="keyword">int</span> fd, <span class="keyword">struct</span> stat *buf)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lstat</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *<span class="keyword">restrict</span> pathname, <span class="keyword">struct</span> stat *<span class="keyword">restrict</span> buf)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fstatat</span><span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> <span class="keyword">restrict</span> pathname, <span class="keyword">struct</span> stat *<span class="keyword">restrict</span> buf, <span class="keyword">int</span> flag)</span></span>;</span><br></pre></td></tr></table></figure>
<p>stat函数返回指定路径文件有关的信息结构。</p>
<p>fstat函数获得已在fd上打开文件的信息。</p>
<p>lstat函数类似与stat，但当文件是一个符号链接时，lstat返回该符号连接的信息，而不是由该符号链接引用的文件的信息。</p>
<p>fstatat是使用相对与fd的相对位置，这种带at的函数在文件系统中很常见，在说文件I/O时也介绍了open和openat在相对路径上的特点，都类似的，可参照。对于符号链接，fstatat函数返回：</p>
<ul>
<li>符号链接所指向的文件的信息（默认）</li>
<li>符号链接本身的信息（设置了AT_SYMLINK_NOFOLLOW标志）
    
    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2016/06/Unix文件和目录/#more" class="more-link">阅读全文</a>
        </div>
      
      
    
    <div class="clearfix">
      
    </div>
  </footer>
</article>




  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/Unix文件IO/">
  <time datetime="2016-06-02T14:53:48.000Z">
    2016-06-02
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/06/Unix文件IO/">UNIX文件I/O</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>UNIX系统的文件I/O及函数调用。</p>
<h2 id="文件描述符"><a href="#文件描述符" class="headerlink" title="文件描述符"></a>文件描述符</h2><p>文件描述符是一个非负整数，又内核分配，函数open和creat返回文件描述符，函数read和write需要文件描述符作为参数。</p>
<p>在UNIX系统中，文件描述符0，1，2有代表特殊的I/O：</p>
<ul>
<li>0 - 标准输入（stdin）</li>
<li>1 - 标准输出（stdout）</li>
<li>2 - 标准错误（stderr）</li>
</ul>
<p>文件描述符的上限又操作系统的OPEN_MAX标识，表示一个进程最多能打开的文件个数，相应的文件描述符范围为 0-OPEN_MAX-1。</p>
<h2 id="函数open和openat"><a href="#函数open和openat" class="headerlink" title="函数open和openat"></a>函数open和openat</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">open</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">int</span> oflag, ... <span class="comment">/* mode_t mode */</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">openat</span><span class="params">(<span class="keyword">int</span> fd, <span class="keyword">const</span> <span class="keyword">char</span> *path, <span class="keyword">int</span> oflag, ... <span class="comment">/* mode_t mode */</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p>打开文件，并以当前最小可用文件描述符返回。</p>
<p>带有at的函数一般是对应不带at的函数的相对路径版本，作为参照物的就是带有at函数的第一个参数（文件描述符），在文件IO的函数集中有很多这样的函数对。</p>
<p>对于带有at的函数，有三种可能性：</p>
<ul>
<li>path是绝对路径，fd被忽略，和不带at的函数效果相同</li>
<li>path是相对路径，则相对于fd所指示的目录，如果fd是AT_FDCWD，则相对于当前工作目录
    
    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2016/06/Unix文件IO/#more" class="more-link">阅读全文</a>
        </div>
      
      
    
    <div class="clearfix">
      
    </div>
  </footer>
</article>




  
    <article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/06/Hexo博客折腾记/">
  <time datetime="2016-06-01T06:36:09.000Z">
    2016-06-01
  </time>
</a>
    
    
  
    <h1 class="title"><a href="/2016/06/Hexo博客折腾记/">Hexo博客折腾记</a></h1>
  

  </header>
  
  <div class="entry">
    
      <p>博客(blog)本质是一个记录的地方，而其与手头上的笔记本(纸质或电子)的区别在于，博客是可以通过互联网访问到的，便自然多了分享的特点。<br>一般来说建立博客无非几个目的：</p>
<ol>
<li>总结</li>
<li>分享</li>
<li><del>装逼</del></li>
</ol>
    
    
  </div>
  <footer class="end-sep">
    
      
        <div class="alignleft">
          <a href="/2016/06/Hexo博客折腾记/#more" class="more-link">阅读全文</a>
        </div>
      
      
    
    <div class="clearfix">
      
    </div>
  </footer>
</article>




  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>

</div>
  </div>
  <footer id="footer"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="site-stat">
<span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次 | </span>
<span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次 | 
</span>
<span id="busuanzi_container_page_pv">
  本页阅读量<span id="busuanzi_value_page_pv"></span>次
</span>
</div>
<div class="copyright">
  
  &copy; 2016 <a href="/">xingzhihao</a>
  
</div>
</footer>
  <script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var duoshuoQuery = { short_name: 'xzhspace' };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';
    ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>


</body>
</html>