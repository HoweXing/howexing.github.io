---
title: Hexo博客折腾记
date: 2016-06-01 14:36:09
tags: hexo
---
博客(blog)本质是一个记录的地方，而其与手头上的笔记本(纸质或电子)的区别在于，博客是可以通过互联网访问到的，便自然多了分享的特点。
一般来说建立博客无非几个目的：
1. 总结
2. 分享
3. ~~装逼~~

<!--more-->
实际上，通用的博客已经有新浪博客、网易博客以及腾讯博客等，在IT领域的博客也有CSDN和博客园等。那么为何还要折腾自己的博客？除了一些大神需要自己的独特空间外，其他人基本是因为第3个目的。

# Hexo个人博客

## 在哪里搞个人博客
博客嘛，有文字有图，那就要有空间来装。

装自己的电脑里当然是可以，那如何能让别人通过互联网访问，以及如何保证可用性稳定性，都是麻烦的事情。

租台主机，这个对我等小人物的博客来说那就是杀鸡用牛刀了，价格不菲且用于博客就有点浪费。

著名的~~同性交友~~网站Github是程序员的好地方，它除了提供了代码仓库以外，还提供了项目Page，我们就可以利用这个来建立一个可靠的、免费的、无限流量的个人博客，当然人家说了空间限制300M。

## 为什么用hexo

Github只是提供了一个空间，并没有类似一般博客那种编辑和管理后台，所以网页都要生成完毕后再放上去。

hexo是基于nodejs开发的，用于生成静态网页，有很好的模块化特点，很方便进行个性化的改造。如果有前端的经验，学习hexo并不困难。

学习hexo你可以去[Hexo官方主页](http://www.hexo.io)阅读文档，不过文档的详细程度简直了，所以在使用过程中要善用网络资源。

# 建立hexo博客

对于hexo博客，网上已经有一大批详细的教程，我觉得比较有用的是[不如](http://ibruce.info)的博文\-[hexo你的博客](http://ibruce.info/2013/11/22/hexo-your-blog/)。他已经详细地描述了从安装开始的步骤，并介绍了几种自定义方法。
不过其中的
```
npm install -g hexo
```
要更改为
```
npm install -g hexo-cli
```
并且在使用hexo的服务器和部署功能前，你还需要
```
npm install hexo-server
npm install hexo-deployer-git
```
这是因为Hexo版本升级进行的改动，所以在换版本时要去跟踪文档中的变动。

# 我要说的

## Google服务的cdn

一些hexo的主题中，使用了google提供的js文件或者fonts字体文件。

通常以
```
www.googleapis.com
www.gstatic.com
```
开头。

对于前者一般在after-footer.ejs文件中被链接，你需要搜索要国内的替代链接，直接在ejs文件里面替换文本。

对于后者，一般在variable.styl文件中被链接，你可以使用[360cdn](http://libs.useso.com)，不过注意，原来的可能使用的https，而360cdn这个只支持http。

## 多机同步

用hexo部署的静态网页仅有生成以后的网页文件，而没有主题等的设置文件，所以换台电脑，你只能从github上clone下网页内容，而不能再次进行hexo的编辑。

可以使用github分支来保存hexo文件。为了网页能被互联网访问，静态网页文件需要占用master分支，可以新建一个hexo分支来存hexo文件。

Github的clone是把所有分支下载，可以使用
```
git branch -a
```
查看当前分支以及所有分支，可以看到默认当前分支为master。所以你的工作目录里面只能看到静态网页文件。使用
```
git checkout hexo
```
就可以切换到hexo分支，就看到hexo文件了，可以进行hexo的操作了。

要注意的是，hexo deploy也是使用git命令进行的push，所以在.deploy_git文件夹中有一个git仓库，用于静态网页文件的管理。你在A机对hexo分支进行push之后，在B机进行hexo deploy可能会将hexo文件push到master分支内。这是因为A机对hexo分支的push省略了.deploy_git里面的内容，原因是git没法管理别人的仓库，这时在B机进行hexo deploy导致缺少本地仓库，解决方法是在.deploy_git里面使用
```
git init
```
初始化一个仓库，这样B机上的hexo deploy才有本地仓库可用。
